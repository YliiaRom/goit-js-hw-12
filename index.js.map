{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\n//создание html объекта для вставки\n\nexport function createGallery({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) {\n  return ` <li class=\"gallery-item\">\n  <div class=\"img-container\">\n<div class=\"gallery\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n</div>\n  </div>\n  <div class=\"img-content\">\n    <div>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </div>\n    <div>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </div>\n    <div>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </div>\n    <div>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </div>\n    \n  </div>\n</li>\n  `;}\n\n  //чистка/\nexport function clearListGallery(galleryList) {\n  galleryList.innerHTML = '';\n  }\n\n\n  //рендер\nexport function renderGallery(galleryList, obj) {\n  galleryList.insertAdjacentHTML('beforeend', obj);\n}\n\n\n\n//loader/\nexport const createLoader = () => {\n  return `<span class=\"loader\"></span>`;\n}\nexport const renderLoader = (galleryList, obj) => {\n  galleryList.insertAdjacentHTML('afterend', obj);\n}\n\nexport const firework = (e) => {\n  document.querySelectorAll('.smoke div').forEach((div => {\n    let x = div.offsetLeft - e.pageX;\n    let y = div.offsetTop - e.pageY;\n\n    let dist = Math.sqrt(x * x + y * y);\n    let score = Math.exp(dist * -0.01);\n    div.style.transform = \"scale(\"+ score * 4 +\") rotate(\"+ score * 180 +\"deg)\";\n    div.style.opacity = score * 2;\n    let randomNum = Math.random() * 720;\n    div.style.filter = `hue-rotate(${randomNum}deg)`;\n  }))\n}\n\n\n\n","//запрос-Promis\n\nimport axios from \"axios\";\nimport { createGallery } from \"./render-functions\";\n\n//при submit/\nexport const fetchGalleryPromise = (inputValue, pageValue) => {\n  //создание ключей и параметров для запросов (fetch)\n//данные ключей\nconst API_KEY  = '48215593-063b757550f958811bbabd770';\nconst API_URL = 'https://pixabay.com/api/';\n\n//экземпляр для создания объекта с данными(есть метод toString = делает разделение &(searchParams.toString())/ если поставить в рядок автоматически проставится & между ними)\nconst searchParams = {\n  params: {\n    key: API_KEY,\n    q: `${inputValue}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: `${pageValue}`,\n    per_page: 15\n  }\n}\n\n//результ = объект ответа от сервера{}\n\n return axios.get(`${API_URL}`, searchParams);\n\n}\n// созд галереи \nexport const createGalleryObj = (arrPromise) => {\n\n  const arrGallery = arrPromise.data.hits;\n\n    //перебрать и сделать новый объект - join(объединить в рядок с обозн символом)\n    const galleryTemplate = arrGallery.map(el => createGallery(el)).join('');\n\nreturn galleryTemplate;\n}\n\n\n","//Импорт- для оповещений Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst galleryList = document.querySelector('.gallery-list');\nconst btnLoad = document.querySelector('.btn-load');\nlet smoke = document.getElementById('smoke');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 50,\n});\n\n\n\n\nimport { clearListGallery } from \"./js/render-functions\";\nimport { renderGallery } from \"./js/render-functions\";\n\nimport { fetchGalleryPromise } from \"./js/pixabay-api\";\nimport { createGalleryObj } from \"./js/pixabay-api\";\n\n//loader\nimport { createLoader } from \"./js/render-functions\";\nimport { renderLoader } from \"./js/render-functions\";\n\n//firework\nimport { firework } from \"./js/render-functions\";\n\n\n\n//title decor\ndocument.addEventListener('DOMContentLoaded', () => {\n  const titleGallery = document.querySelector('.title-gallery');\n  const subTitle = document.querySelector('.sub-title');\n  try {\n\n    if (subTitle) {\n      let shadow = '';\n      for (let i = 0; i < 9; i++) {\n        shadow += `${-i}px ${i}px 0 #d9d9d9` + (i < 8 ? ',' : '');\n      }\n      subTitle.style.textShadow = shadow; \n    } \n  \n    if (titleGallery) {\n      let shadow = '';\n      for (let i = 0; i < 15; i++) {\n        shadow += `${-i}px ${i}px 0 #d9d9d9` + (i < 14 ? ',' : '');\n      }\n      titleGallery.style.textShadow = shadow; \n    } \n  } catch(error) {\n    let err = error;\n  }\n\n});\n\nlet pageValue = 1;\nlet inputValue = '';\n\n\nform.addEventListener('submit', async event => {\n  try {\n\n  event.preventDefault();\n\n  clearListGallery(galleryList);\n\n  pageValue = 1;\n\n  //input value\n inputValue = form.elements.text.value.trim();\n\n//input проверка\nif(inputValue === '') {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'You can input either a string or numbers.',\n    position: 'topLeft'\n});\nform.elements.text.value = \"\";\nbtnLoad.classList.add('js-hidden');\n  return;\n}\n\n//проверка на символы\nconst standartSimbols = /[^a-zA-Z0-9\\s]/;\nif(standartSimbols.test(inputValue)) {\n  btnLoad.classList.add('js-hidden');\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Only letters and numbers are allowed for input.',\n    position: 'topLeft',\n});\n\n//чистка input\nform.elements.text.value = \"\";\nreturn;\n}\n\n\n//loader\nconst loader = createLoader();\nrenderLoader(galleryList, loader);\n\n\n \n    const resultFetch = await fetchGalleryPromise(inputValue, pageValue);\n\n    const lengthData = resultFetch.data.hits.length;\n    if (lengthData === 0) {\n      btnLoad.classList.add('js-hidden');\n    }\n\n    const totalObj = resultFetch.data.totalHits;\n    const hitsArray = resultFetch.data.hits;\n  \n    if(hitsArray.length === 0) {\n      btnLoad.classList.add('js-hidden');\n      iziToast.info({\n        title: \"We're sorry,\",\n        message: \"but you've reached the end of search results.\",\n        position: 'bottomCenter',\n    });\n    }\n\n  //проверка на пустой массив - если ввели несуществующее слово\n  if(totalObj === 0) {\n\n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) loaderObj.remove();\n\n    iziToast.info({\n      title: 'Sorry,',\n      message: 'there are no images matching your search query. Please try again!',\n      position: 'center',\n  });\n\n  form.elements.text.value = '';\n\n  btnLoad.classList.add('js-hidden');\n  return;\n  }\n\n  const galleryTemplate = createGalleryObj(resultFetch);\n\n\n  \n\n        //удалить лоадер\n        const loaderObj = document.querySelector('.loader');\n        if (loaderObj) {\n          loaderObj.remove();\n        }\n       \n        // добавить gallery в html\n        renderGallery(galleryList, galleryTemplate); \n\n  \n    lightbox.refresh();\n\n    if(galleryList.children.length > 0) {\n  btnLoad.classList.remove('js-hidden');\n    } else {\n      btnLoad.classList.add('js-hidden');\n    }\n\n    if (totalObj < 15) {\n      btnLoad.classList.add('js-hidden');\n    }\n    \n  \n    \n    //чистка input\n    form.elements.text.value = '';\n    \n  \n\n  //fetch + inputValue\n  \n  } catch(error) {\n    \n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) {\n      loaderObj.remove();\n    }\n    iziToast.warning({\n      title: 'Sorry,',\n      message: 'There was an error fetching the images. Please try again!',\n      position: 'center',\n    });\n  \n  };\n\n});\n\n\nconst createMorePhoto = async (event) => {\n  try {\n    event.preventDefault();\n\n  pageValue += 1;\n\n  //создание loader\nconst loaderBtnLoad = document.createElement('div');\nloaderBtnLoad.textContent = 'Loading images, please wait...';\nloaderBtnLoad.classList.add('js-loader-more');\nbtnLoad.insertAdjacentElement('afterend', loaderBtnLoad);\n\n\n    const resultLoadPromise = await fetchGalleryPromise(inputValue, pageValue);\n\n\n    //Прячу кнопку если пустой массив 55.50\n    const lengthData = resultLoadPromise.data.hits.length;\nif (lengthData === 0) {\n  btnLoad.classList.add('js-hidden');\n  btnLoad.removeEventListener('click', createMorePhoto);\n  loaderBtnLoad.remove();\n  iziToast.info({\n    title: \"We're sorry,\",\n    message: \"but you've reached the end of search results.\",\n    position: 'bottomCenter',\n});\n  return;\n}\nif (lengthData < 15) {\n  btnLoad.classList.add('js-hidden');\n}\n\n\n  \n    //проверка на пустой массив - если ввели несуществующее слово\n    const totalObj = resultLoadPromise.data.totalHits;\n    const hitsArray = resultLoadPromise.data.hits;\n\n\n    //конец фото= прятать кнопку\n    // if (pageValue > totalObj) {\n    //   btnLoad.classList.add('js-hidden');\n    // }\n  \n    if(hitsArray.length === 0) {\n      btnLoad.classList.add('js-hidden');\n      iziToast.info({\n        title: \"We're sorry,\",\n        message: \"but you've reached the end of search results.\",\n        position: 'bottomCenter',\n    });\n    }\n\n   \n\n    if(totalObj === 0) {\n      const loaderObj = document.querySelector('.loader');\n      if (loaderObj) loaderObj.remove();\n      iziToast.info({\n        title: 'Sorry,',\n        message: 'there are no images matching your search query. Please try again!',\n        position: 'center',\n    });\n    form.elements.text.value = '';\n    btnLoad.classList.add('js-hidden');\n    return;\n    }\n    if (totalObj < 15) {\n      btnLoad.classList.add('js-hidden');\n    }\n  // созд галлереи\n    const galleryTemplate = createGalleryObj(resultLoadPromise);\n\n\n        // добавить в html\nrenderGallery(galleryList, galleryTemplate);\n\nloaderBtnLoad.remove()\n  \n    lightbox.refresh();\n\n\n    //scroll\n\n   // Прокрутка страницы\n   const liElement = document.querySelector('.gallery-item');\n   if (liElement) {\n     const rectHeight = liElement.getBoundingClientRect().height * 2;\n    \n     window.scrollBy({\n       top: rectHeight, \n       left: 0,\n       behavior: \"smooth\",\n     });\n\n    }\n\n  } catch (error) {\n    iziToast.warning({\n      title: 'Sorry,',\n      message: 'There was an error fetching the images. Please try again!',\n      position: 'center',\n    });\n  }\n\n}\n\nbtnLoad.addEventListener('click', createMorePhoto);\n\n\n\n//smoke\n function createSmoke(e) {\n  let elem = document.createElement('div');\n  elem.classList.add('elem');\n  \n  elem.style.left = `${e.clientX}px`;\n  elem.style.top = `${e.clientY}px`;\n\n  smoke.appendChild(elem);\n \n  setTimeout(() => {\n    elem.remove();\n}, 3000);\n   \n}\ndocument.addEventListener('mousemove', createSmoke);\n\nlet section = document.querySelector('.spawner');\nfor (let i = 0; i < 600 ; i ++) {\n  let div =  document.createElement('div');\n  smoke.appendChild(div);\n}\ndocument.addEventListener(\"mousemove\", firework);"],"names":["createGallery","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearListGallery","galleryList","renderGallery","obj","createLoader","renderLoader","firework","e","div","x","y","dist","score","randomNum","fetchGalleryPromise","inputValue","pageValue","API_KEY","API_URL","searchParams","axios","createGalleryObj","arrPromise","el","form","btnLoad","smoke","lightbox","SimpleLightbox","titleGallery","subTitle","shadow","i","event","iziToast","loader","resultFetch","totalObj","loaderObj","galleryTemplate","createMorePhoto","loaderBtnLoad","resultLoadPromise","lengthData","liElement","rectHeight","createSmoke","elem"],"mappings":"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"}