{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//создание html объекта для вставки\n\nexport function createGallery({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) {\n  return ` <li class=\"gallery-item\">\n  <div class=\"img-container\">\n<div class=\"gallery\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n</div>\n  </div>\n  <div class=\"img-content\">\n    <div>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </div>\n    <div>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </div>\n    <div>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </div>\n    <div>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </div>\n    \n  </div>\n</li>\n  `;}\n\n  //чистка\nexport function clearListGallery(galleryList) {\n  galleryList.innerHTML = '';\n  }\n\n\n  //рендер\nexport function renderGallery(galleryList, obj) {\n  galleryList.insertAdjacentHTML('beforeend', obj);\n}\n\n\n\n//loader\nexport const createLoader = () => {\n  return `<span class=\"loader\"></span>`;\n}\nexport const renderLoader = (galleryList, obj) => {\n  galleryList.insertAdjacentHTML('afterend', obj);\n}\n\n\n//\n\n","//запрос-Promis\n\nimport axios from \"axios\";\nimport { createGallery } from \"./render-functions\";\n\n\nexport const fetchGalleryPromise = (inputValue, pageValue) => {\n  //создание ключей и параметров для запросов (fetch)\n//данные ключей\nconst API_KEY  = '48215593-063b757550f958811bbabd770';\nconst API_URL = 'https://pixabay.com/api/';\n\n//экземпляр для создания объекта с данными(есть метод toString = делает разделение &(searchParams.toString())/ если поставить в рядок автоматически проставится & между ними)\nconst searchParams = {\n  params: {\n    key: API_KEY,\n    q: `${inputValue}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: `${pageValue}`,\n    per_page: 15\n  }\n}\n\n//результ = объект ответа от сервера{}\n\n return axios.get(`${API_URL}`, searchParams);\n\n}\n// созд галереи \nexport const createGalleryObj = (arrPromise) => {\n\n  const arrGallery = arrPromise.data.hits;\n\n    //перебрать и сделать новый объект - join(объединить в рядок с обозн символом)\n    const galleryTemplate = arrGallery.map(el => createGallery(el)).join('');\n\nreturn galleryTemplate;\n}\n\n\n","//Импорт- для оповещений Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst btnSubmit = document.querySelector('button');\nconst galleryList = document.querySelector('.gallery-list');\nconst titleGallery = document.querySelector('.title-gallery');\nconst btnLoad = document.querySelector('.btn-load');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 50,\n});\n\n\n\nimport { createGallery } from \"./js/render-functions/\";\nimport { clearListGallery } from \"./js/render-functions\";\nimport { renderGallery } from \"./js/render-functions\";\n\nimport { fetchGalleryPromise } from \"./js/pixabay-api\";\nimport { createGalleryObj } from \"./js/pixabay-api\";\n\n//loader\nimport { createLoader } from \"./js/render-functions\";\nimport { renderLoader } from \"./js/render-functions\";\n\n\n\n//title decor\ndocument.addEventListener('DOMContentLoaded', () => {\n  const titleGallery = document.querySelector('.title-gallery');\n  const subTitle = document.querySelector('.sub-title');\n  if (subTitle) {\n    let shadow = '';\n    for (let i = 0; i < 9; i++) {\n      shadow += `${-i}px ${i}px 0 #d9d9d9` + (i < 8 ? ',' : '');\n    }\n    subTitle.style.textShadow = shadow; \n  } else {\n    console.error('Элемент с классом .title не найден!');\n  }\n\n  if (titleGallery) {\n    let shadow = '';\n    for (let i = 0; i < 15; i++) {\n      shadow += `${-i}px ${i}px 0 #d9d9d9` + (i < 14 ? ',' : '');\n    }\n    titleGallery.style.textShadow = shadow; \n  } else {\n    console.error('Элемент с классом .title не найден!');\n  }\n});\n\nlet pageValue = 1;\nlet inputValue = '';\n\n\n\n\nform.addEventListener('submit', async event => {\n  try {\n\n  event.preventDefault();\n\n  clearListGallery(galleryList);\n\n  pageValue = 1;\n\n  //input value\n inputValue = form.elements.text.value.trim();\n\n//input проверка\nif(inputValue === '') {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'You can input either a string or numbers.',\n    position: 'topLeft'\n});\nform.elements.text.value = \"\";\nbtnLoad.classList.add('js-hidden');\n  return;\n}\n\n//проверка на символы\nconst standartSimbols = /[^a-zA-Z0-9\\s]/;\nif(standartSimbols.test(inputValue)) {\n  btnLoad.classList.add('js-hidden');\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Only letters and numbers are allowed for input.',\n    position: 'topLeft',\n});\n\n//чистка input\nform.elements.text.value = \"\";\nreturn;\n}\n\n\n//loader\nconst loader = createLoader();\nrenderLoader(galleryList, loader);\n\n\n \n    const resultFetch = await fetchGalleryPromise(inputValue, pageValue);\n\n    const totalObj = resultFetch.data.totalHits;\n    const hitsArray = resultFetch.data.hits;\n  \n    if(hitsArray.length === 0) {\n      btnLoad.classList.add('js-hidden');\n      iziToast.info({\n        title: \"We're sorry,\",\n        message: \"but you've reached the end of search results.\",\n        position: 'bottomCenter',\n    });\n    }\n\n  //проверка на пустой массив - если ввели несуществующее слово\n  if(totalObj === 0) {\n\n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) loaderObj.remove();\n\n    iziToast.info({\n      title: 'Sorry,',\n      message: 'there are no images matching your search query. Please try again!',\n      position: 'center',\n  });\n\n  form.elements.text.value = '';\n\n  btnLoad.classList.add('js-hidden');\n  return;\n  }\n\n  const galleryTemplate = createGalleryObj(resultFetch);\n\n\n  \n\n        //удалить лоадер\n        const loaderObj = document.querySelector('.loader');\n        if (loaderObj) {\n          loaderObj.remove();\n        }\n       \n        // добавить gallery в html\n        renderGallery(galleryList, galleryTemplate); \n\n  \n    lightbox.refresh();\n\n    if(galleryList.children.length > 0) {\n  btnLoad.classList.remove('js-hidden');\n    } else {\n      btnLoad.classList.add('js-hidden');\n    }\n\n    if (totalObj < 15) {\n      btnLoad.classList.add('js-hidden');\n    }\n    \n\n  // if (btnLoad.classList.contains('')) {\n\n  // }\n  \n    \n    //чистка input\n    form.elements.text.value = '';\n    \n  \n  //fetch + inputValue\n  \n  } catch(error) {\n    \n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) {\n      loaderObj.remove();\n    }\n    iziToast.warning({\n      title: 'Sorry,',\n      message: 'There was an error fetching the images. Please try again!',\n      position: 'center',\n    });\n  \n  };\n\n});\n\n\nconst createMorePhoto = async (event) => {\n  try {\n    event.preventDefault();\n\n\n\n  \n \n  pageValue += 1;\n\n  //создание loader\nconst loaderBtnLoad = document.createElement('div');\nloaderBtnLoad.textContent = 'Loading images, please wait...';\nloaderBtnLoad.classList.add('js-loader-more');\nbtnLoad.insertAdjacentElement('afterend', loaderBtnLoad);\n\n\n    const resultLoadPromise = await fetchGalleryPromise(inputValue, pageValue);\n\n\n  \n    //проверка на пустой массив - если ввели несуществующее слово\n    const totalObj = resultLoadPromise.data.totalHits;\n    const hitsArray = resultLoadPromise.data.hits;\n  \n    if(hitsArray.length === 0) {\n      btnLoad.classList.add('js-hidden');\n      iziToast.info({\n        title: \"We're sorry,\",\n        message: \"but you've reached the end of search results.\",\n        position: 'bottomCenter',\n    });\n    }\n   \n\n    if(totalObj === 0) {\n      const loaderObj = document.querySelector('.loader');\n      if (loaderObj) loaderObj.remove();\n      iziToast.info({\n        title: 'Sorry,',\n        message: 'there are no images matching your search query. Please try again!',\n        position: 'center',\n    });\n    form.elements.text.value = '';\n    btnLoad.classList.add('js-hidden');\n    return;\n    }\n    if (totalObj < 15) {\n      btnLoad.classList.add('js-hidden');\n    }\n  \n    const galleryTemplate = createGalleryObj(resultLoadPromise);\n\n        //удалить лоадер\n        // const loaderObj = document.querySelector('.loader');\n        // loaderObj.remove();\n\n        // добавить в html\nrenderGallery(galleryList, galleryTemplate);\n\nloaderBtnLoad.remove()\n  \n    lightbox.refresh();\n\n\n    //scroll\n\n   // Прокрутка страницы\n   const liElement = document.querySelector('.gallery-item');\n   if (liElement) {\n     const rectHeight = liElement.getBoundingClientRect().height * 2 + 80 + 50;\n    \n     window.scrollBy({\n       top: rectHeight, // Прокрутка на высоту двух карточек\n       left: 0,\n       behavior: \"smooth\",\n     });\n\n    }\n\n  } catch (error) {\n    iziToast.warning({\n      title: 'Sorry,',\n      message: 'There was an error fetching the images. Please try again!',\n      position: 'center',\n    });\n  }\n\n}\nbtnLoad.addEventListener('click', createMorePhoto);\n// if(!li === undefined) {\n\n// }"],"names":["createGallery","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearListGallery","galleryList","renderGallery","obj","createLoader","renderLoader","fetchGalleryPromise","inputValue","pageValue","API_KEY","API_URL","searchParams","axios","createGalleryObj","arrPromise","el","form","btnLoad","lightbox","SimpleLightbox","titleGallery","subTitle","shadow","i","event","iziToast","loader","resultFetch","totalObj","loaderObj","galleryTemplate","createMorePhoto","loaderBtnLoad","resultLoadPromise","liElement","rectHeight"],"mappings":"owBAEO,SAASA,EAAc,CAAC,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAG,CACpG,MAAO;AAAA;AAAA;AAAA,eAGMN,CAAa,eAAeC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAM1DC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,WAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,GAKhB,CAGG,SAASC,EAAiBC,EAAa,CAC5CA,EAAY,UAAY,EACvB,CAII,SAASC,EAAcD,EAAaE,EAAK,CAC9CF,EAAY,mBAAmB,YAAaE,CAAG,CACjD,CAKO,MAAMC,EAAe,IACnB,+BAEIC,EAAe,CAACJ,EAAaE,IAAQ,CAChDF,EAAY,mBAAmB,WAAYE,CAAG,CAChD,EC5CaG,EAAsB,CAACC,EAAYC,IAAc,CAG9D,MAAMC,EAAW,qCACXC,EAAU,2BAGVC,EAAe,CACnB,OAAQ,CACN,IAAKF,EACL,EAAG,GAAGF,CAAU,GAChB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,GAAGC,CAAS,GAClB,SAAU,EACX,CACH,EAIC,OAAOI,EAAM,IAAI,GAAGF,CAAO,GAAIC,CAAY,CAE5C,EAEaE,EAAoBC,GAEZA,EAAW,KAAK,KAGE,IAAIC,GAAMvB,EAAcuB,CAAE,CAAC,EAAE,KAAK,EAAE,ECzBrEC,EAAO,SAAS,cAAc,OAAO,EACzB,SAAS,cAAc,QAAQ,EACjD,MAAMf,EAAc,SAAS,cAAc,eAAe,EACrC,SAAS,cAAc,gBAAgB,EAC5D,MAAMgB,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,EAChB,CAAC,EAkBD,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAW,SAAS,cAAc,YAAY,EACpD,GAAIA,EAAU,CACZ,IAAIC,EAAS,GACb,QAASC,EAAI,EAAGA,EAAI,EAAGA,IACrBD,GAAU,GAAG,CAACC,CAAC,MAAMA,CAAC,gBAAkBA,EAAI,EAAI,IAAM,IAExDF,EAAS,MAAM,WAAaC,CAChC,MACI,QAAQ,MAAM,qCAAqC,EAGrD,GAAIF,EAAc,CAChB,IAAIE,EAAS,GACb,QAASC,EAAI,EAAGA,EAAI,GAAIA,IACtBD,GAAU,GAAG,CAACC,CAAC,MAAMA,CAAC,gBAAkBA,EAAI,GAAK,IAAM,IAEzDH,EAAa,MAAM,WAAaE,CACpC,MACI,QAAQ,MAAM,qCAAqC,CAEvD,CAAC,EAED,IAAId,EAAY,EACZD,EAAa,GAKjBS,EAAK,iBAAiB,SAAU,MAAMQ,GAAS,CAC7C,GAAI,CAYN,GAVEA,EAAM,eAAc,EAEpBxB,EAAiBC,CAAW,EAE5BO,EAAY,EAGbD,EAAaS,EAAK,SAAS,KAAK,MAAM,KAAI,EAGxCT,IAAe,GAAI,CACpBkB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,4CACT,SAAU,SACd,CAAC,EACDT,EAAK,SAAS,KAAK,MAAQ,GAC3BC,EAAQ,UAAU,IAAI,WAAW,EAC/B,MACF,CAIA,GADwB,iBACL,KAAKV,CAAU,EAAG,CACnCU,EAAQ,UAAU,IAAI,WAAW,EACjCQ,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,kDACT,SAAU,SACd,CAAC,EAGDT,EAAK,SAAS,KAAK,MAAQ,GAC3B,MACA,CAIA,MAAMU,EAAStB,EAAY,EAC3BC,EAAaJ,EAAayB,CAAM,EAI5B,MAAMC,EAAc,MAAMrB,EAAoBC,EAAYC,CAAS,EAE7DoB,EAAWD,EAAY,KAAK,UAapC,GAZoBA,EAAY,KAAK,KAEtB,SAAW,IACtBV,EAAQ,UAAU,IAAI,WAAW,EACjCQ,EAAS,KAAK,CACZ,MAAO,eACP,QAAS,gDACT,SAAU,cAClB,CAAK,GAIAG,IAAa,EAAG,CAEjB,MAAMC,EAAY,SAAS,cAAc,SAAS,EAC9CA,GAAWA,EAAU,SAEzBJ,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,oEACT,SAAU,QAChB,CAAG,EAEDT,EAAK,SAAS,KAAK,MAAQ,GAE3BC,EAAQ,UAAU,IAAI,WAAW,EACjC,MACC,CAED,MAAMa,EAAkBjB,EAAiBc,CAAW,EAMxCE,EAAY,SAAS,cAAc,SAAS,EAC9CA,GACFA,EAAU,OAAM,EAIlB3B,EAAcD,EAAa6B,CAAe,EAG9CZ,EAAS,QAAO,EAEbjB,EAAY,SAAS,OAAS,EACnCgB,EAAQ,UAAU,OAAO,WAAW,EAEhCA,EAAQ,UAAU,IAAI,WAAW,EAG/BW,EAAW,IACbX,EAAQ,UAAU,IAAI,WAAW,EAUnCD,EAAK,SAAS,KAAK,MAAQ,EAK5B,MAAc,CAEb,MAAMa,EAAY,SAAS,cAAc,SAAS,EAC9CA,GACFA,EAAU,OAAM,EAElBJ,EAAS,QAAQ,CACf,MAAO,SACP,QAAS,4DACT,SAAU,QAChB,CAAK,CAGL,CACA,CAAC,EAGD,MAAMM,EAAkB,MAAOP,GAAU,CACvC,GAAI,CACFA,EAAM,eAAc,EAMtBhB,GAAa,EAGf,MAAMwB,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,YAAc,iCAC5BA,EAAc,UAAU,IAAI,gBAAgB,EAC5Cf,EAAQ,sBAAsB,WAAYe,CAAa,EAGnD,MAAMC,EAAoB,MAAM3B,EAAoBC,EAAYC,CAAS,EAKnEoB,EAAWK,EAAkB,KAAK,UAaxC,GAZkBA,EAAkB,KAAK,KAE5B,SAAW,IACtBhB,EAAQ,UAAU,IAAI,WAAW,EACjCQ,EAAS,KAAK,CACZ,MAAO,eACP,QAAS,gDACT,SAAU,cAClB,CAAK,GAIEG,IAAa,EAAG,CACjB,MAAMC,EAAY,SAAS,cAAc,SAAS,EAC9CA,GAAWA,EAAU,SACzBJ,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,oEACT,SAAU,QAClB,CAAK,EACDT,EAAK,SAAS,KAAK,MAAQ,GAC3BC,EAAQ,UAAU,IAAI,WAAW,EACjC,MACC,CACGW,EAAW,IACbX,EAAQ,UAAU,IAAI,WAAW,EAGnC,MAAMa,EAAkBjB,EAAiBoB,CAAiB,EAO9D/B,EAAcD,EAAa6B,CAAe,EAE1CE,EAAc,OAAQ,EAElBd,EAAS,QAAO,EAMjB,MAAMgB,EAAY,SAAS,cAAc,eAAe,EACxD,GAAIA,EAAW,CACb,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OAAS,EAAI,GAAK,GAEvE,OAAO,SAAS,CACd,IAAKC,EACL,KAAM,EACN,SAAU,QACjB,CAAM,CAED,CAEF,MAAe,CACdV,EAAS,QAAQ,CACf,MAAO,SACP,QAAS,4DACT,SAAU,QAChB,CAAK,CACF,CAEH,EACAR,EAAQ,iBAAiB,QAASc,CAAe"}