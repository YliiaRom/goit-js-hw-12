{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//создание html объекта для вставки\n\nexport function createGallery({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) {\n  return ` <li class=\"gallery-item\">\n  <div class=\"img-container\">\n<div class=\"gallery\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n</div>\n  </div>\n  <div class=\"img-content\">\n    <div>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </div>\n    <div>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </div>\n    <div>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </div>\n    <div>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </div>\n    \n  </div>\n</li>\n  `;}\n\n  //чистка\nexport function clearListGallery(galleryList) {\n  galleryList.innerHTML = '';\n  }\n\n\n  //рендер\nexport function renderGallery(galleryList, obj) {\n  galleryList.insertAdjacentHTML('beforeend', obj);\n}\n\n\n\n//loader\nexport const createLoader = () => {\n  return `<span class=\"loader\"></span>`;\n}\nexport const renderLoader = (galleryList, obj) => {\n  galleryList.insertAdjacentHTML('afterend', obj);\n}\n\n\n//\n\n","//запрос-Promis\n\nexport const fetchGalleryPromise = (inputValue) => {\n  //создание ключей и параметров для запросов (fetch)\n//данные ключей\nconst API_KEY  = '48215593-063b757550f958811bbabd770';\nconst API_URL = 'https://pixabay.com/api/';\n\n//экземпляр для создания объекта с данными(есть метод toString = делает разделение &(searchParams.toString())/ если поставить в рядок автоматически проставится & между ними)\nconst searchParams = new URLSearchParams({\n  key: API_KEY,\n  q: `${inputValue}`,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 9\n});\n\n//fetch\nreturn fetch(`${API_URL}?${searchParams}`).then(response => {\n  if(!response.ok){\n    throw new Error(response.status); \n  }\n  return response.json();\n})\n\n}\n\n","//Импорт- для оповещений Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst btnSubmit = document.querySelector('button');\nconst galleryList = document.querySelector('.gallery-list');\nconst titleGallery = document.querySelector('.title-gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 50,\n});\n\n\n\nimport { createGallery } from \"./js/render-functions/\";\nimport { clearListGallery } from \"./js/render-functions\";\nimport { renderGallery } from \"./js/render-functions\";\n\nimport { fetchGalleryPromise } from \"./js/pixabay-api\";\n\n//loader\nimport { createLoader } from \"./js/render-functions\";\nimport { renderLoader } from \"./js/render-functions\";\n\n\n//title decor\ndocument.addEventListener('DOMContentLoaded', () => {\n  const titleGallery = document.querySelector('.title-gallery');\n  if (titleGallery) {\n    let shadow = '';\n    for (let i = 0; i < 15; i++) {\n      shadow += `${-i}px ${i}px 0 #d9d9d9` + (i < 14 ? ',' : '');\n    }\n    titleGallery.style.textShadow = shadow; // Применяем тени\n  } else {\n    console.error('Элемент с классом .title не найден!');\n  }\n});\n\n\n\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  clearListGallery(galleryList);\n\n  //input value\nconst inputValue = form.elements.text.value.trim();\n\n//input проверка\nif(inputValue === '') {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'You can input either a string or numbers.',\n    position: 'topLeft'\n});\nform.elements.text.value = \"\";\n  return;\n}\n//проверка на символы\nconst standartSimbols = /[^a-zA-Z0-9]/;\nif(standartSimbols.test(inputValue)) {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Only letters and numbers are allowed for input.',\n    position: 'topLeft',\n});\n//чистка input\nform.elements.text.value = \"\";\nreturn;\n}\n\nconst loader = createLoader();\nrenderLoader(galleryList, loader);\n\n\n//fetch + inputValue\nfetchGalleryPromise(inputValue).then(date => {\n\n//проверка на пустой массив - если ввели несуществующее слово\nif(date.total === 0) {\n  const loaderObj = document.querySelector('.loader');\n  if (loaderObj) loaderObj.remove();\n  iziToast.info({\n    title: 'Sorry,',\n    message: 'there are no images matching your search query. Please try again!',\n    position: 'center',\n});\nform.elements.text.value = '';\nreturn;\n}\n\n\n//распаковать промис\nconst promiseGallery = date.hits;\n\n//перебрать и сделать новый объект - join(объединить в рядок с обозн символом)\nconst galleryTemplate = promiseGallery.map(el => createGallery(el)).join('');\n\n\n//удалить лоадер\nconst loaderObj = document.querySelector('.loader');\nloaderObj.remove();\n// добавить в html\nrenderGallery(galleryList, galleryTemplate); \n\nlightbox.refresh();\n\n//чистка input\nform.elements.text.value = '';\n})\n.catch(err => {\n  \n  const loaderObj = document.querySelector('.loader');\n  if (loaderObj) {\n    loaderObj.remove();\n  }\n  iziToast.warning({\n    title: 'Sorry,',\n    message: 'There was an error fetching the images. Please try again!',\n    position: 'center',\n  });\n\n});\n\n});\n"],"names":["createGallery","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearListGallery","galleryList","renderGallery","obj","createLoader","renderLoader","fetchGalleryPromise","inputValue","API_KEY","API_URL","searchParams","response","form","lightbox","SimpleLightbox","titleGallery","shadow","i","event","iziToast","loader","date","loaderObj","galleryTemplate","el","err"],"mappings":"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"}