{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//создание html объекта для вставки\n\nexport function createGallery({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) {\n  return ` <li class=\"gallery-item\">\n  <div class=\"img-container\">\n<div class=\"gallery\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n</div>\n  </div>\n  <div class=\"img-content\">\n    <div>\n      <h2>Likes</h2>\n      <p>${likes}</p>\n    </div>\n    <div>\n      <h2>Views</h2>\n      <p>${views}</p>\n    </div>\n    <div>\n      <h2>Comments</h2>\n      <p>${comments}</p>\n    </div>\n    <div>\n      <h2>Downloads</h2>\n      <p>${downloads}</p>\n    </div>\n    \n  </div>\n</li>\n  `;}\n\n  //чистка\nexport function clearListGallery(galleryList) {\n  galleryList.innerHTML = '';\n  }\n\n\n  //рендер\nexport function renderGallery(galleryList, obj) {\n  galleryList.insertAdjacentHTML('beforeend', obj);\n}\n\n\n\n//loader\nexport const createLoader = () => {\n  return `<span class=\"loader\"></span>`;\n}\nexport const renderLoader = (galleryList, obj) => {\n  galleryList.insertAdjacentHTML('afterend', obj);\n}\n\n\n//\n\n","//запрос-Promis\n\nimport axios from \"axios\";\n\n\n\nexport const fetchGalleryPromise = (inputValue, pageValue) => {\n  //создание ключей и параметров для запросов (fetch)\n//данные ключей\nconst API_KEY  = '48215593-063b757550f958811bbabd770';\nconst API_URL = 'https://pixabay.com/api/';\n\n//экземпляр для создания объекта с данными(есть метод toString = делает разделение &(searchParams.toString())/ если поставить в рядок автоматически проставится & между ними)\nconst searchParams = {\n  params: {\n    key: API_KEY,\n    q: `${inputValue}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: `${pageValue}`,\n    per_page: 15\n  }\n}\n\n//результ = объект ответа от сервера{}\n\n return axios.get(`${API_URL}`, searchParams);\n\n}\n\n\n\n","//Импорт- для оповещений Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst btnSubmit = document.querySelector('button');\nconst galleryList = document.querySelector('.gallery-list');\nconst titleGallery = document.querySelector('.title-gallery');\nconst btnLoad = document.querySelector('.btn-load');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 50,\n});\n\n\n\nimport { createGallery } from \"./js/render-functions/\";\nimport { clearListGallery } from \"./js/render-functions\";\nimport { renderGallery } from \"./js/render-functions\";\n\nimport { fetchGalleryPromise } from \"./js/pixabay-api\";\n\n//loader\nimport { createLoader } from \"./js/render-functions\";\nimport { renderLoader } from \"./js/render-functions\";\n\n\n//title decor\ndocument.addEventListener('DOMContentLoaded', () => {\n  const titleGallery = document.querySelector('.title-gallery');\n  if (titleGallery) {\n    let shadow = '';\n    for (let i = 0; i < 15; i++) {\n      shadow += `${-i}px ${i}px 0 #d9d9d9` + (i < 14 ? ',' : '');\n    }\n    titleGallery.style.textShadow = shadow; // Применяем тени\n  } else {\n    console.error('Элемент с классом .title не найден!');\n  }\n});\n\nlet pageValue = 1;\nlet inputValue = '';\n\nform.addEventListener('submit', async event => {\n  try {\n\n  event.preventDefault();\n\n  clearListGallery(galleryList);\n\n\n  //input value\n inputValue = form.elements.text.value.trim();\n\n//input проверка\nif(inputValue === '') {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'You can input either a string or numbers.',\n    position: 'topLeft'\n});\nform.elements.text.value = \"\";\nbtnLoad.classList.add('js-hidden');\n  return;\n}\n\n//проверка на символы\nconst standartSimbols = /[^a-zA-Z0-9]/;\nif(standartSimbols.test(inputValue)) {\n  btnLoad.classList.add('js-hidden');\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Only letters and numbers are allowed for input.',\n    position: 'topLeft',\n});\n\n//чистка input\nform.elements.text.value = \"\";\nreturn;\n}\n\n\n//loader\nconst loader = createLoader();\nrenderLoader(galleryList, loader);\n\n\n \n    const resultFetch = await fetchGalleryPromise(inputValue, pageValue);\n    console.log(resultFetch.data);\n     const arrGallery = resultFetch.data.hits;\n     console.log(arrGallery);\n\n  //проверка на пустой массив - если ввели несуществующее слово\n  if(resultFetch.data.total === 0) {\n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) loaderObj.remove();\n    iziToast.info({\n      title: 'Sorry,',\n      message: 'there are no images matching your search query. Please try again!',\n      position: 'center',\n  });\n  form.elements.text.value = '';\n  btnLoad.classList.add('js-hidden');\n  return;\n  }\n  \n    \n    //перебрать и сделать новый объект - join(объединить в рядок с обозн символом)\n    const galleryTemplate = arrGallery.map(el => createGallery(el)).join('');\n  \n        //удалить лоадер\n        const loaderObj = document.querySelector('.loader');\n        loaderObj.remove();\n\n        // добавить в html\n        renderGallery(galleryList, galleryTemplate); \n  \n    lightbox.refresh();\nif(resultFetch.data.total > 1) {\n  btnLoad.classList.remove('js-hidden');\n}\n  \n    \n    //чистка input\n    form.elements.text.value = '';\n    \n  \n  //fetch + inputValue\n  \n  } catch(error) {\n    \n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) {\n      loaderObj.remove();\n    }\n    iziToast.warning({\n      title: 'Sorry,',\n      message: 'There was an error fetching the images. Please try again!',\n      position: 'center',\n    });\n  \n  };\n\n});\n\n\nconst createMorePhoto = async () => {\n\n \n  pageValue += 1;\n\n  try {\n    const resultLoadPromise = await fetchGalleryPromise(inputValue, pageValue);\n\n    const arrGallery = resultLoadPromise.data.hits;\nconsole.log(arrGallery);\n\n    //проверка на пустой массив - если ввели несуществующее слово\n  if(resultLoadPromise.data.total === 0) {\n    const loaderObj = document.querySelector('.loader');\n    if (loaderObj) loaderObj.remove();\n    iziToast.info({\n      title: 'Sorry,',\n      message: 'there are no images matching your search query. Please try again!',\n      position: 'center',\n  });\n  form.elements.text.value = '';\n  btnLoad.classList.add('js-hidden');\n  return;\n  }\n  \n    \n    //перебрать и сделать новый объект - join(объединить в рядок с обозн символом)\n    const galleryTemplateMore = arrGallery.map(el => createGallery(el)).join('');\n  console.log(galleryTemplateMore);\n        //удалить лоадер\n        const loaderObj = document.querySelector('.loader');\n        loaderObj.remove();\n\n        // добавить в html\n        renderGallery(galleryList, galleryTemplateMore);\n  \n    lightbox.refresh();\n\n console.log(arrGallery);\n  } catch (arr) {\n\n  }\n\n}\nbtnLoad.addEventListener('click', createMorePhoto);\n"],"names":["createGallery","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearListGallery","galleryList","renderGallery","obj","createLoader","renderLoader","fetchGalleryPromise","inputValue","pageValue","API_KEY","API_URL","searchParams","axios","form","btnLoad","lightbox","SimpleLightbox","titleGallery","shadow","i","event","iziToast","loader","resultFetch","arrGallery","loaderObj","galleryTemplate","el","createMorePhoto","resultLoadPromise","galleryTemplateMore"],"mappings":"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"}